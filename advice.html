<!DOCTYPE html>
<html lang="si">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced Introduction Modal</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Montserrat:wght@400;600&display=swap" rel="stylesheet">
    <style>
        /* Base styles */
        body {
            font-family: 'Montserrat', Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5; /* Light default background */
            color: #333;
            min-height: 100vh;
        }
        
        /* Page content */
        .page-content {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: center;
            align-items: center;
            height: 200px;
        }
        
        /* Modal container */
        #introModal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        
        /* Modal content */
        .modal-content {
            background-color: #1a2b56;
            color: white;
            border-radius: 12px;
            max-width: 550px;
            width: 90%;
            box-shadow: 0 5px 25px rgba(0, 0, 0, 0.5), 0 0 20px rgba(59, 130, 246, 0.6);
            animation: glow 3s infinite alternate;
            overflow: hidden;
        }
        
        @keyframes glow {
            from {
                box-shadow: 0 5px 25px rgba(0, 0, 0, 0.5), 0 0 20px rgba(59, 130, 246, 0.6);
            }
            to {
                box-shadow: 0 5px 25px rgba(0, 0, 0, 0.5), 0 0 30px rgba(59, 130, 246, 0.9);
            }
        }
        
        /* Modal table */
        .intro-table {
            width: 100%;
            border-collapse: collapse;
            border: 2px solid transparent;
            background-image: linear-gradient(#1a2b56, #1a2b56), 
                             linear-gradient(90deg, #3b82f6, #60a5fa);
            background-origin: border-box;
            background-clip: padding-box, border-box;
        }
        
        .intro-table th {
            text-align: center;
            padding: 20px 15px;
            font-family: 'Poppins', sans-serif;
            font-size: 1.5rem;
            font-weight: 700;
            border-bottom: 2px solid rgba(59, 130, 246, 0.8);
            color: #ffffff;
            text-shadow: 0 0 10px rgba(59, 130, 246, 0.5);
            background: linear-gradient(to right, #1a2b56, #243b76);
        }
        
        .intro-table td {
            padding: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            font-family: 'Montserrat', sans-serif;
            vertical-align: middle;
        }
        
        .intro-table td:first-child {
            font-weight: 600;
            color: #60a5fa;
        }
        
        .intro-table tr:last-child td {
            border-bottom: none;
        }

        .welcome-message {
            font-family: 'Poppins', sans-serif;
            font-size: 1.1rem;
            padding: 10px 0;
            font-weight: 600;
            text-align: center;
            color: #ffffff;
            text-shadow: 0 0 8px rgba(59, 130, 246, 0.4);
        }

        /* Page indicators */
        .page-indicators {
            display: flex;
            justify-content: center;
            margin: 15px 0 5px;
        }
        
        .page-dot {
            height: 10px;
            width: 10px;
            margin: 0 5px;
            background-color: rgba(255, 255, 255, 0.4);
            border-radius: 50%;
            display: inline-block;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .page-dot.active {
            background-color: #60a5fa;
            box-shadow: 0 0 10px rgba(96, 165, 250, 0.8);
            transform: scale(1.2);
        }
        
        /* Page-specific colors */
        .page-1-glow {
            border-left: 3px solid #60a5fa;
        }
        
        .page-2-glow {
            border-left: 3px solid #34d399;
        }
        
        .page-3-glow {
            border-left: 3px solid #f97316;
        }
        
        .page-4-glow {
            border-left: 3px solid #a855f7;
        }
        
        .feature-icon {
            margin-right: 8px;
            color: #60a5fa;
        }
        
        .page-2-glow .feature-icon {
            color: #34d399;
        }
        
        .page-3-glow .feature-icon {
            color: #f97316;
        }
        
        .page-4-glow .feature-icon {
            color: #a855f7;
        }
        
        /* Toggle switch for dark/light mode */
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 28px;
            margin-left: 10px;
        }
        
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 28px;
        }
        
        .slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .slider {
            background-color: #4a90e2;
        }
        
        input:checked + .slider:before {
            transform: translateX(32px);
        }
        
        /* Button styles */
        .action-buttons {
            display: flex;
            justify-content: space-between;
            padding: 15px 20px 20px;
            background: rgba(0, 0, 0, 0.2);
        }
        
        .buttons-container {
            display: flex;
            gap: 10px; /* Changed from 35px to 10px */
        }
        
        .btn {
            padding: 10px 18px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            font-size: 0.95rem;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .btn::after {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            border-radius: 8px;
            z-index: -1;
            opacity: 0;
            transition: all 0.3s ease;
        }
        
        .btn:hover::after {
            opacity: 1;
        }
        
        .btn-back {
            background: #2d3748;
            color: white;
            box-shadow: 0 4px 10px rgba(239, 68, 68, 0.3);
            display: none;
        }
        
        .btn-back:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(239, 68, 68, 0.5);
        }
        
        .btn-back::after {
            background: linear-gradient(45deg, #ef4444 0%, transparent 50%, #ef4444 100%);
            animation: glow-red 2s infinite alternate;
        }
        
        @keyframes glow-red {
            0% {
                opacity: 0.5;
                box-shadow: 0 0 5px rgba(239, 68, 68, 0.5);
            }
            100% {
                opacity: 0.8;
                box-shadow: 0 0 20px rgba(239, 68, 68, 0.8);
            }
        }
        
        .btn-next {
            background: linear-gradient(to right, #3b82f6, #60a5fa);
            color: white;
            box-shadow: 0 4px 10px rgba(59, 130, 246, 0.5);
        }
        
        .btn-next:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(59, 130, 246, 0.6);
        }
        
        .btn-next::after {
            background: linear-gradient(45deg, #3b82f6 0%, transparent 50%, #60a5fa 100%);
            animation: glow-blue 2s infinite alternate;
        }
        
        @keyframes glow-blue {
            0% {
                opacity: 0.5;
                box-shadow: 0 0 5px rgba(59, 130, 246, 0.5);
            }
            100% {
                opacity: 0.8;
                box-shadow: 0 0 20px rgba(59, 130, 246, 0.8);
            }
        }
        
        .btn-done {
            background: linear-gradient(to right, #10b981, #34d399);
            color: white;
            box-shadow: 0 4px 10px rgba(16, 185, 129, 0.5);
            display: none;
        }
        
        .btn-done:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(16, 185, 129, 0.6);
        }
        
        .btn-done::after {
            background: linear-gradient(45deg, #10b981 0%, transparent 50%, #34d399 100%);
            animation: glow-green 2s infinite alternate;
        }
        
        @keyframes glow-green {
            0% {
                opacity: 0.5;
                box-shadow: 0 0 5px rgba(16, 185, 129, 0.5);
            }
            100% {
                opacity: 0.8;
                box-shadow: 0 0 20px rgba(16, 185, 129, 0.8);
            }
        }
        
        .btn-skip {
            background-color: transparent;
            color: #ccc;
            border: 1px solid #ccc;
            margin-right: 10px;
            box-shadow: 0 4px 10px rgba(168, 85, 247, 0.3);
        }
        
        .btn-skip:hover {
            color: white;
            border-color: white;
            box-shadow: 0 6px 15px rgba(168, 85, 247, 0.6);
        }
        
        .btn-skip::after {
            background: linear-gradient(45deg, #a855f7 0%, transparent 50%, #a855f7 100%);
            animation: glow-purple 2s infinite alternate;
        }
        
        @keyframes glow-purple {
            0% {
                opacity: 0.5;
                box-shadow: 0 0 5px rgba(168, 85, 247, 0.5);
            }
            100% {
                opacity: 0.8;
                box-shadow: 0 0 20px rgba(168, 85, 247, 0.8);
            }
        }
        
        .btn-guideline {
            background: linear-gradient(to right, #3b82f6, #60a5fa);
            color: white;
            box-shadow: 0 4px 10px rgba(59, 130, 246, 0.5);
            padding: 12px 24px;
            font-size: 1.1rem;
        }
        
        .btn-guideline:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(59, 130, 246, 0.6);
        }
        
        /* Light/Dark mode styles */
        .light-mode {
            background-color: #f5f5f5;
            color: #333;
        }
        
        .dark-mode {
            background-color: #1a2b56;
            color: white;
        }
        
        /* Hide modal by default - show only when needed */
        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <!-- Page content - simplified to just show the Read Guideline button -->
    <div class="page-content">
        <button class="btn btn-guideline" id="showGuidelineButton">මාර්ගෝපදේශ කියවන්න</button>
    </div>

    <!-- Introduction Modal -->
    <div id="introModal" class="hidden">
        <div class="modal-content">
            <table class="intro-table">
                <thead>
                    <tr>
                        <th colspan="2">අපගේ වෙබ් අඩවියට සාදරයෙන් පිළිගනිමු</th>
                    </tr>
                </thead>
                <tbody id="modalContent">
                    <!-- First page content -->
                    <tr class="modal-page page-1-glow" data-page="1">
                        <td colspan="2" class="welcome-message">
                            ඔබගේ අත්දැකීම වැඩිදියුණු කිරීමට සැලසුම් කර ඇති විශිෂ්ට විශේෂාංග සොයා ගන්න!
                        </td>
                    </tr>
                    <tr class="modal-page page-1-glow" data-page="1">
                        <td><i class="fas fa-tachometer-alt feature-icon"></i>Dashboard</td>
                        <td><strong>ඉතා අලංකාර ලෙස මෙම වෙබ් අඩවිය සකස් කොට ඇත.</strong></td>
                    </tr>
                    <tr class="modal-page page-1-glow" data-page="1">
                        <td><i class="fas fa-book feature-icon"></i> My To-Do List</td>
                        <td><strong>ඔයා ඉදිරි දවස් වල කරන්න ඉන්න කොටස මෙකේ සටහන් කරලා ඒ වැඩ ඉවර කරාට පස්සේ "Complete Task Bin" එකට Add කරන්න පුළුවන් විදිහට හදලා තියෙනවා.</strong></td>
                    </tr>
                    <tr class="modal-page page-1-glow" data-page="1">
                        <td><i class="fas fa-search feature-icon"></i>My Notes</td>
                        <td><strong>ඔයාට තියෙන වැදගත් SHORT NOTES, මේ සයිට් එකේ type කරලා (Highlights) වගේ වැඩ කෑලි දාලා Save karnna puluwn අමතක වුන වෙලාවට බලාගන්න.</strong></td>
                    </tr>
                    
                    <!-- Second page content (hidden initially) -->
                    <tr class="modal-page page-2-glow" data-page="2" style="display: none;">
                        <td colspan="2" class="welcome-message">
                            මෙම අභිරුචිකරණ විකල්ප සමඟ ඔබේ අත්දැකීම පුද්ගලීකරණය කරන්න!
                        </td>
                    </tr>
                    <tr class="modal-page page-2-glow" data-page="2" style="display: none;">
                        <td><i class="fas fa-moon feature-icon"></i> පෙනුම් මාදිලිය</td>
                        <td>
                            <strong>සැහැල්ලු / අඳුරු මාදිලිය:</strong>
                            <label class="toggle-switch">
                                <input type="checkbox" id="modeToggle">
                                <span class="slider"></span>
                            </label>
                        </td>
                    </tr>
                    <tr class="modal-page page-2-glow" data-page="2" style="display: none;">
                        <td><i class="fas fa-user-circle feature-icon"></i>Time Countdown</td>
                        <td><strong>මේකත් ඉතාම වැදගත් Feature එකක් ඔයාට තව A/L Exam ekt තියෙන දවස් ගාණ Countdown වෙනවා, මේ සයිට් එකේ.</strong></td>
                    </tr>
                    <tr class="modal-page page-2-glow" data-page="2" style="display: none;">
                        <td><i class="fas fa-bell feature-icon"></i>Motivation Quotes</td>
                        <td><strong>තව ඔයාව දිරිමත් කරන්න Motivations Quotes අන්තර්ගත කරලා තියෙනවා ඒවා කියවන්න.</strong></td>
                    </tr>

                    <!-- Third page content (new) -->
                    <tr class="modal-page page-3-glow" data-page="3" style="display: none;">
                        <td colspan="2" class="welcome-message">
                            අපගේ ප්‍රජා විශේෂාංග සමඟ සම්බන්ධ වී සහයෝගයෙන් කටයුතු කරන්න!
                        </td>
                    </tr>
                    <tr class="modal-page page-3-glow" data-page="3" style="display: none;">
                        <td><i class="fas fa-users feature-icon"></i>Download PDF</td>
                        <td><strong>මේක තමයි සුපිරිම Feature එක ඔයා අර කලින් හැම දවසකම වැඩ කරපු පැය ගාන Chart eke Save කරාට පස්සේ, මාසේ අන්තිමට ඔයාට ඔයාගේම Work Sheet Hours_Pdf File එක ලස්සනට Chart ekth එක්කම් download කරගන්න පුළුවන්.</strong></td>
                    </tr>
                    <tr class="modal-page page-3-glow" data-page="3" style="display: none;">
                        <td><i class="fas fa-comments feature-icon"></i>April To November</td>
                        <td><strong>මේ කියන්නේ ඔයාගේ හැම මාසයකම අලුත් Work Hours Sheet ek ගන්න පුළුවන් විදිහට (Switch To Next Month) කියලා Button එකක් Add කරලා තියෙනවා ඒක Click කරලා මැයි මාසය අරගෙන හැම දවසකම වැඩ කරපු පැය ගණන Save කරන දවස අවසාන වෙලාවේ.</strong></td>
                    </tr>
                    <tr class="modal-page page-3-glow" data-page="3" style="display: none;">
                        <td><i class="fas fa-calendar-alt feature-icon"></i>Up Coming Features</td>
                        <td><strong></strong></td>
                    </tr>

                    <!-- Fourth page content (new) -->
                    <tr class="modal-page page-4-glow" data-page="4" style="display: none;">
                        <td colspan="2" class="welcome-message">
                            ඔබේ ඵලදායීතාව වැඩි කිරීමට උසස් මෙවලම්!
                        </td>
                    </tr>
                    <tr class="modal-page page-4-glow" data-page="4" style="display: none;">
                        <td><i class="fas fa-chart-line feature-icon"></i> විශ්ලේෂණ</td>
                        <td><strong>සවිස්තරාත්මක කාර්ය සාධන මිනුම් සමඟ ඔබේ ප්‍රගතිය නිරීක්ෂණය කරන්න</strong></td>
                    </tr>
                    <tr class="modal-page page-4-glow" data-page="4" style="display: none;">
                        <td><i class="fas fa-cloud-download-alt feature-icon"></i> වලාකුළු සමමුහුර්තකරණය</td>
                        <td><strong>ඕනෑම උපාංගයකින්, ඕනෑම වේලාවක ඔබේ අන්තර්ගතයට ප්‍රවේශ වන්න</strong></td>
                    </tr>
                    <tr class="modal-page page-4-glow" data-page="4" style="display: none;">
                        <td><i class="fas fa-shield-alt feature-icon"></i> උසස් ආරක්ෂාව</td>
                        <td><strong>නවීනතම ආරක්ෂක විශේෂාංග සමඟ පහසුවෙන් විවේක ගන්න</strong></td>
                    </tr>
                </tbody>
                <tfoot>
                    <tr>
                        <td colspan="2">
                            <div class="page-indicators">
                                <span class="page-dot active" data-page="1"></span>
                                <span class="page-dot" data-page="2"></span>
                                <span class="page-dot" data-page="3"></span>
                                <span class="page-dot" data-page="4"></span>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2" class="action-buttons">
                            <button class="btn btn-skip" id="skipButton">මඟ හරින්න</button>
                            <div class="buttons-container">
                                <button class="btn btn-back" id="backButton"><i class="fas fa-arrow-left"></i> ආපසු</button>
                                <button class="btn btn-next" id="nextButton">ඊළඟ <i class="fas fa-arrow-right"></i></button>
                                <button class="btn btn-done" id="doneButton">නිමයි <i class="fas fa-check"></i></button>
                            </div>
                        </td>
                    </tr>
                </tfoot>
            </table>
        </div>
    </div>

    <script>
        // Wait for DOM to be fully loaded
		document.addEventListener('DOMContentLoaded', function() {
			console.log("DOM loaded"); // Debug log
			
			// DOM elements
			const modal = document.getElementById('introModal');
			const modeToggle = document.getElementById('modeToggle');
			const nextButton = document.getElementById('nextButton');
			const backButton = document.getElementById('backButton');
			const doneButton = document.getElementById('doneButton');
			const skipButton = document.getElementById('skipButton');
			const showGuidelineButton = document.getElementById('showGuidelineButton');
			const pageDots = document.querySelectorAll('.page-dot');
			
			// Debug check for modal
			if (!modal) {
				console.error("Modal not found");
			}
			
			// Current page tracker
			let currentPage = 1;
			const totalPages = 4; // Updated to 4 pages
			
			// Check if first time visitor - using a different key name just in case
			const isFirstTimeVisitor = !localStorage.getItem('siteVisited');
			console.log("First time visitor:", isFirstTimeVisitor); // Debug log
			
			// Show modal for first time visitors
			if (isFirstTimeVisitor) {
				// Show immediately, not with a delay
				showModal();
			}
			
			// Show Guideline button
			if (showGuidelineButton) {
				showGuidelineButton.addEventListener('click', showModal);
			}
			
			// Show the modal
			function showModal() {
				console.log("Showing modal"); // Debug log
				modal.classList.remove('hidden');
			}
			
			// Hide the modal and mark as visited
			function hideModal() {
				console.log("Hiding modal"); // Debug log
				modal.classList.add('hidden');
				localStorage.setItem('siteVisited', 'true');
			}
			
			// Update page indicator dots
			function updatePageDots() {
				pageDots.forEach(dot => {
					if (parseInt(dot.dataset.page) === currentPage) {
						dot.classList.add('active');
					} else {
						dot.classList.remove('active');
					}
				});
			}
			
			// Update navigation buttons
			function updateNavigationButtons() {
				// Show/hide back button based on current page
				if (currentPage > 1) {
					backButton.style.display = 'block';
				} else {
					backButton.style.display = 'none';
				}
				
				// Show/hide next and done buttons based on current page
				if (currentPage === totalPages) {
					nextButton.style.display = 'none';
					doneButton.style.display = 'block';
				} else {
					nextButton.style.display = 'block';
					doneButton.style.display = 'none';
				}
			}
			
			// Navigate to next page
			function goToNextPage() {
				console.log("Going to next page"); // Debug log
				
				// Hide current page elements
				const currentElements = document.querySelectorAll(`.modal-page[data-page="${currentPage}"]`);
				currentElements.forEach(el => el.style.display = 'none');
				
				// Increment page counter
				currentPage++;
				
				// Show next page elements
				const nextElements = document.querySelectorAll(`.modal-page[data-page="${currentPage}"]`);
				nextElements.forEach(el => el.style.display = '');
				
				// Update page indicators and navigation buttons
				updatePageDots();
				updateNavigationButtons();
			}
			
			// Navigate to previous page
			function goToPreviousPage() {
				console.log("Going to previous page"); // Debug log
				
				// Hide current page elements
				const currentElements = document.querySelectorAll(`.modal-page[data-page="${currentPage}"]`);
				currentElements.forEach(el => el.style.display = 'none');
				
				// Decrement page counter
				currentPage--;
				
				// Show previous page elements
				const prevElements = document.querySelectorAll(`.modal-page[data-page="${currentPage}"]`);
				prevElements.forEach(el => el.style.display = '');
				
				// Update page indicators and navigation buttons
				updatePageDots();
				updateNavigationButtons();
			}
			
			// Navigate to specific page when clicking on dot
			pageDots.forEach(dot => {
				dot.addEventListener('click', function() {
					const targetPage = parseInt(this.dataset.page);
					
					// Hide all pages
					document.querySelectorAll('.modal-page').forEach(el => el.style.display = 'none');
					
					// Show target page
					document.querySelectorAll(`.modal-page[data-page="${targetPage}"]`).forEach(el => el.style.display = '');
					
					// Update current page
					currentPage = targetPage;
					
					// Update page indicators and navigation buttons
					updatePageDots();
					updateNavigationButtons();
				});
			});
			
			// Event listeners
			if (nextButton) {
				nextButton.addEventListener('click', goToNextPage);
			}
			
			if (backButton) {
				backButton.addEventListener('click', goToPreviousPage);
			}
			
			if (doneButton) {
				doneButton.addEventListener('click', hideModal);
			}
			
			if (skipButton) {
				skipButton.addEventListener('click', hideModal);
			}
			
			// Initialize button states
			updateNavigationButtons();
			
			// Toggle dark/light mode
			if (modeToggle) {
				modeToggle.addEventListener('change', function() {
					if (this.checked) {
						document.body.classList.remove('light-mode');
						document.body.classList.add('dark-mode');
						localStorage.setItem('darkMode', 'true');
					} else {
						document.body.classList.remove('dark-mode');
						document.body.classList.add('light-mode');
						localStorage.setItem('darkMode', 'false');
					}
				});
			}
			
			// Check saved appearance preference
			const prefersDarkMode = localStorage.getItem('darkMode') === 'true';
			if (modeToggle) {
				modeToggle.checked = prefersDarkMode;
			}
			
			// Apply saved appearance preference on page load
			if (prefersDarkMode) {
				document.body.classList.remove('light-mode');
				document.body.classList.add('dark-mode');
			} else {
				document.body.classList.remove('dark-mode');
				document.body.classList.add('light-mode');
			}
			
			// Handle keyboard navigation
			document.addEventListener('keydown', function(event) {
				// Only respond to key events when modal is visible
				if (!modal.classList.contains('hidden')) {
					if (event.key === 'Escape') {
						// Close modal on Escape key
						hideModal();
					} else if (event.key === 'ArrowRight') {
						// Next page on right arrow
						if (currentPage < totalPages) {
							goToNextPage();
						}
					} else if (event.key === 'ArrowLeft') {
						// Previous page on left arrow
						if (currentPage > 1) {
							goToPreviousPage();
						}
					} else if (event.key === 'Enter') {
						// Complete on Enter key when on last page
						if (currentPage === totalPages) {
							hideModal();
						}
					}
				}
			});
			
			// Add touch swipe support for mobile
			let touchStartX = 0;
			let touchEndX = 0;
			
			modal.addEventListener('touchstart', function(event) {
				touchStartX = event.changedTouches[0].screenX;
			}, false);
			
			modal.addEventListener('touchend', function(event) {
				touchEndX = event.changedTouches[0].screenX;
				handleSwipe();
			}, false);
			
			function handleSwipe() {
				const swipeThreshold = 50; // Minimum distance for swipe to register
				if (touchStartX - touchEndX > swipeThreshold) {
					// Swipe left - go to next page
					if (currentPage < totalPages) {
						goToNextPage();
					}
				} else if (touchEndX - touchStartX > swipeThreshold) {
					// Swipe right - go to previous page
					if (currentPage > 1) {
						goToPreviousPage();
					}
				}
			}
			
			// Handle window resize to ensure modal stays centered
			window.addEventListener('resize', function() {
				if (!modal.classList.contains('hidden')) {
					// Re-center modal content if needed
					const modalContent = modal.querySelector('.modal-content');
					if (modalContent) {
						// Optional: Add any specific resize handling if needed
						// E.g., adjust size for very small screens
						if (window.innerWidth < 480) {
							modalContent.style.width = '95%';
						} else {
							modalContent.style.width = '90%';
						}
					}
				}
			});
		});
	</script>
</body>
</html>
