<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EduMission A/L Subject Streams</title>
    <style>
        :root {
            --primary-bg: #f5f5f5;
            --secondary-bg: #ffffff;
            --text-color: #333333;
            --border-color: #dddddd;
            --highlight: #3498db;
            --stream-science: #4caf50;
            --stream-commerce: #2196f3;
            --stream-arts: #ff9800;
            --stream-technology: #e91e63;
            --star-color: #ffd700;
        }

        .dark-theme {
            --primary-bg: #121212;
            --secondary-bg: #1e1e1e;
            --text-color: #f5f5f5;
            --border-color: #333333;
            --highlight: #2980b9;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--primary-bg);
            color: var(--text-color);
            transition: all 0.3s ease;
        }

        header {
            background-color: #102336;
            padding: 1rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: white;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            color: white;
            animation: logoShine 2s infinite alternate;
        }

        @keyframes logoShine {
            from {
                text-shadow: 0 0 5px rgba(255,255,255,0.5);
            }
            to {
                text-shadow: 0 0 15px rgba(255,255,255,0.8), 0 0 20px rgba(52, 152, 219, 0.8);
            }
        }
		
        .theme-toggle122 {
		     display: inline-block;
			  padding: 12px 30px;
			  font-size: 20px;
			  color: #111;
			  background-color: #00f7ff;
			  border: 2px solid #00f7ff;
			  border-radius: 8px;
			  text-decoration: none;
			  font-weight: bold;
			  text-shadow: 0 0 8px #00f7ff, 0 0 12px #00f7ff;
			  box-shadow: 0 0 10px #00f7ff, 0 0 20px #00f7ff inset;
			  transition: 0.3s ease;
			}

        .theme-toggle122:hover {
           background-color: #00f7ff;
		  color: #111;
		  box-shadow: 0 0 20px #00f7ff, 0 0 30px #00f7ff, 0 0 40px #00f7ff;
		}

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        h1, h2, h3 {
            color: var(--highlight);
        }

        .stream-container {
            display: flex;
            flex-wrap: wrap;
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .stream-card {
            flex: 1;
            min-width: 300px;
            background-color: var(--secondary-bg);
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            padding: 1.5rem;
            transition: transform 0.3s ease;
        }

        .stream-card:hover {
            transform: translateY(-5px);
        }

        .stream-science {
            border-top: 5px solid var(--stream-science);
        }

        .stream-commerce {
            border-top: 5px solid var(--stream-commerce);
        }

        .stream-arts {
            border-top: 5px solid var(--stream-arts);
        }
        
        .stream-technology {
            border-top: 5px solid var(--stream-technology);
        }

        .stream-title {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--border-color);
        }

        .science-title {
            color: var(--stream-science);
        }

        .commerce-title {
            color: var(--stream-commerce);
        }

        .arts-title {
            color: var(--stream-arts);
        }
        
        .technology-title {
            color: var(--stream-technology);
        }

        .category {
            margin-bottom: 1.5rem;
        }

        .subject-combo {
            background-color: var(--primary-bg);
            border-radius: 6px;
            padding: 1rem;
            margin-bottom: 1rem;
        }

        .common-subjects {
            font-style: italic;
            margin-top: 1rem;
            padding-top: 0.5rem;
            border-top: 1px dashed var(--border-color);
        }

        .planner-section {
            background-color: var(--secondary-bg);
            border-radius: 8px;
            padding: 2rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1.5rem;
        }

        th, td {
            border: 1px solid var(--border-color);
            padding: 0.75rem;
            text-align: center;
        }

        th {
            background-color: var(--highlight);
            color: white;
        }

        tr:nth-child(even) {
            background-color: var(--primary-bg);
        }

        .star {
            color: var(--star-color);
            font-size: 1.2rem;
            cursor: pointer;
        }

        .subject-selector {
            margin-bottom: 2rem;
        }

        select {
            padding: 0.5rem;
            margin-right: 1rem;
            border-radius: 4px;
            border: 1px solid var(--border-color);
            background-color: var(--secondary-bg);
            color: var(--text-color);
        }

        button {
          display: inline-block;
		  padding: 7px 20px;
		  font-size: 12px;
		  color: #111;
		  background-color: #00f7ff;
		  border: 2px solid #00f7ff;
		  border-radius: 8px;
		  text-decoration: none;
		  font-weight: bold;
		  text-shadow: 0 0 8px #00f7ff, 0 0 12px #00f7ff;
		  box-shadow: 0 0 10px #00f7ff, 0 0 20px #00f7ff inset;
		  transition: 0.3s ease;
		}

        .selected-subjects {
            background-color: var(--primary-bg);
            border-radius: 6px;
            padding: 1rem;
            margin-bottom: 1rem;
        }

        footer {
            text-align: center;
            padding: 1rem;
            background-color: var(--secondary-bg);
            color: var(--text-color);
            margin-top: 2rem;
        }
		
		.osi-lak {
		     display: inline-block;
			  padding: 6px 40px;
			  margin-bottom: 30px;
			  margin-top: 45px;
			  font-size: 20px;
			  color: white;
			  background-color: red;
			  border: 2px solid red;
			  border-radius: 8px;
			  text-decoration: none;
			  font-weight: bold;
			  text-shadow: 0 0 8px red, 0 0 12px red;
			  box-shadow: 0 0 10px red, 0 0 20px red inset;
			  transition: 0.3s ease;
			}

        .osi-lak:hover {
           background-color: red;
		  color: #111;
		  box-shadow: 0 0 20px red, 0 0 30px red, 0 0 40px red;
		}
		
		.selection-container856 {
        max-width: 500px;
        margin: 30px auto;
        padding: 25px;
        background-color: #2d3748;
        border-radius: 12px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        position: relative;
        overflow: hidden;
    }
    
    /* Animated border effect */
    .selection-container856::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        border: 2px solid transparent;
        border-radius: 12px;
        background: linear-gradient(90deg, #0066ff, #00c6ff, #0066ff) border-box;
        -webkit-mask: linear-gradient(#fff 0 0) padding-box, linear-gradient(#fff 0 0);
        -webkit-mask-composite: xor;
        mask-composite: exclude;
        animation: borderAnimation 4s linear infinite;
        z-index: 0;
    }
    
    @keyframes borderAnimation {
        0% {
            background-position: 0% 50%;
        }
        50% {
            background-position: 100% 50%;
        }
        100% {
            background-position: 0% 50%;
        }
    }
    
    .form-title {
        text-align: center;
        margin-bottom: 20px;
        color: #ffffff;
        font-size: 24px;
        font-weight: 600;
        position: relative;
        z-index: 1;
    }
    
    .select-group856 {
        margin-bottom: 20px;
        position: relative;
        z-index: 1;
    }
    
    .select-group856 label {
        display: block;
        margin-bottom: 8px;
        font-size: 16px;
        font-weight: 500;
        color: #ffffff;
    }
    
    select {
        width: 100%;
        padding: 12px 15px;
        border-radius: 8px;
        border: 1px solid #d1d9e6;
        background-color: #ffffff;
        font-size: 16px;
        color: #000000;
        transition: all 0.3s ease;
        appearance: none;
        background-image: url("data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23007CB2%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E");
        background-repeat: no-repeat;
        background-position: right 15px top 50%;
        background-size: 12px auto;
    }
    
    select:focus {
        outline: none;
        border-color: #0066ff;
        box-shadow: 0 0 0 3px rgba(0, 102, 255, 0.15);
    }
    
    select:disabled {
        background-color: #f1f1f1;
        cursor: not-allowed;
    }
    
    button856 {
        width: 100%;
        padding: 12px;
        border: none;
        border-radius: 8px;
        background: linear-gradient(135deg, #0066ff, #00c6ff);
        color: white;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
    }
    
    button856::after {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
        transition: 0.5s;
    }
    
    button856:hover::after {
        left: 100%;
    }
    
    button856:hover {
        box-shadow: 0 5px 15px rgba(0, 102, 255, 0.4);
        transform: translateY(-2px);
    }
    
    .selected-subjects856 {
        margin-top: 25px;
        padding: 15px;
        background-color: #a19c9c;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        position: relative;
        z-index: 1;
    }
    
    .selected-subjects856 p {
        color: #2c3e50;
        font-size: 16px;
        margin: 0;
        text-align: center;
    }
    
    .subject-item {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 10px 0;
        border-bottom: 1px solid #eaeaea;
    }
    
    .subject-item:last-child {
        border-bottom: none;
    }
    
    /* Dark mode support */
    @media (prefers-color-scheme: dark) {
        .selection-container856 {
            background-color: #2d3748;
        }
        
        .form-title {
            color: #e2e8f0;
        }
        
        .select-group label {
            color: #e2e8f0;
        }
        
        select {
            background-color: #ffffff;
            border-color: #4a5568;
            color: #000000;
        }
        
        .selected-subjects856 {
            background-color: #a19c9c;
        }
        
        .selected-subjects856 p {
            color: #e2e8f0;
        }
        
        .subject-item {
            border-bottom-color: #4a5568;
        }
    }
    </style>
</head>
<body>
    <header>
        <div class="logo">EduMission A/L</div>
        <button class="theme-toggle122" id="themeToggle">Dark Theme</button>
    </header>

    <div class="container">
        <h1>A/L Main Subject Streams</h1>
        
        <div class="stream-container">
            <!-- Science Stream -->
            <div class="stream-card stream-science">
                <h2 class="stream-title science-title">Science</h2>
                
                <div class="category">
                    <h3>Physical Science Stream</h3>
                    <div class="subject-combo">
                        <strong>Subjects combination:</strong> Combined Mathematics, Physics, Chemistry
                    </div>
                </div>
                
                <div class="category">
                    <h3>Biological Science Stream</h3>
                    <div class="subject-combo">
                        <strong>Subjects combination:</strong> Biology, Physics/Agriculture, Chemistry
                    </div>
                </div>
                
                <div class="category">
                    <h3>Common Stream</h3>
                    <div class="subject-combo">
                        <strong>Subjects combination:</strong> Combined Mathematics, Physics, ICT
                    </div>
                </div>
                
                <div class="common-subjects">
                    <strong>Common Subjects:</strong> General English, General Information Technology
                </div>
            </div>
            
            <!-- Technology Stream -->
            <div class="stream-card stream-technology">
                <h2 class="stream-title technology-title">Technology</h2>
                
                <div class="category">
                    <h3>First Subject</h3>
                    <div class="subject-combo">
                        <strong>Subject:</strong> Science for Technology
                    </div>
                </div>
                
                <div class="category">
                    <h3>Second Subject</h3>
                    <div class="subject-combo">
                        <strong>Subject options:</strong> Engineering Technology or Bio-system Technology
                    </div>
                </div>
                
                <div class="category">
                    <h3>Third Subject (Select one)</h3>
                    <div class="subject-combo">
                        <strong>Subject options:</strong> Economics, Geography, Home Economics, English Language, Accountancy, Communication and Media Study, Information and Communication Technology, Arts, Business Studies, Agriculture
                    </div>
                </div>
                
                <div class="common-subjects">
                    <strong>Common Subjects:</strong> General English, General Information Technology
                </div>
            </div>
            
            <!-- Commerce Stream -->
            <div class="stream-card stream-commerce">
                <h2 class="stream-title commerce-title">Commerce</h2>
                
                <div class="category">
                    <h3>First Category</h3>
                    <div class="subject-combo">
                        <strong>Subjects combination:</strong> Accounting, Business Studies, Economics
                    </div>
                </div>
                
                <div class="category">
                    <h3>Second Category</h3>
                    <div class="subject-combo">
                        <strong>Subjects combination:</strong> Accounting, Business Studies, ICT
                    </div>
                </div>
                
                <div class="category">
                    <h3>Third Category</h3>
                    <div class="subject-combo">
                        <strong>Subjects combination:</strong> Accounting, Economics, ICT
                    </div>
                </div>
                
                <div class="category">
                    <h3>Fourth Category</h3>
                    <div class="subject-combo">
                        <strong>Subjects combination:</strong> Accounting, Economics, Business Statistics
                    </div>
                </div>
                
                <div class="common-subjects">
                    <strong>Common Subjects:</strong> General English, General Information Technology
                </div>
            </div>
            
            <!-- Arts Stream -->
            <div class="stream-card stream-arts">
                <h2 class="stream-title arts-title">Arts</h2>
                
                <div class="category">
                    <h3>First Category</h3>
                    <div class="subject-combo">
                        <strong>Subjects combination:</strong> European History, Buddhist Civilization, Geography(S.M/E.M), Dancing, Oriental Music, German (E.M), Agriculture
                    </div>
                </div>
                
                <div class="category">
                    <h3>Second Category</h3>
                    <div class="subject-combo">
                        <strong>Subjects combination:</strong> Political Science, English Literature, Media Studies, Drama and Theater, Art
                    </div>
                </div>
                
                <div class="category">
                    <h3>Third Category</h3>
                    <div class="subject-combo">
                        <strong>Subjects combination:</strong> Economics(S.M/E.), Sinhala, Logic, French (E.M), Japanese (S.M), ICT (E.M)
                    </div>
                </div>
                
                <div class="common-subjects">
                    <strong>Common Subjects:</strong> General English, General Information Technology
                </div>
            </div>
        </div>
        
		<div class="planner-section">
			<h2>Personal Study Planner</h2>
			
			<div class="subject-selector">
				<h3>Select Your Subjects</h3>
				
				<div style="text-align: right; margin-right: 30px;">
					<a class="osi-lak">Fill Your Subject Stream & Category</a>
				</div>
				
				<div class="selection-container856">
					<h2 class="form-title">Subject Selection</h2>
					
					<div class="select-group856">
						<label for="streamSelect">Select Stream:</label>
						<select id="streamSelect">
							<option value="">Select Stream</option>
							<option value="science">Science</option>
							<option value="commerce">Commerce</option>
							<option value="arts">Arts</option>
							<option value="technology">Technology</option>
						</select>
					</div>
					
					<div class="select-group856">
						<label for="categorySelect">Select Category:</label>
						<select id="categorySelect" disabled>
							<option value="">Select Category</option>
						</select>
					</div>
					
					<!-- New Third Subject Selector for Technology Stream -->
					<div class="select-group856" id="thirdSubjectContainer" style="display: none;">
						<label for="thirdSubjectSelect">Select Third Subject:</label>
						<select id="thirdSubjectSelect">
							<option value="">Select Third Subject</option>
							<option value="Economics">Economics</option>
							<option value="Geography">Geography</option>
							<option value="Home Economics">Home Economics</option>
							<option value="English Language">English Language</option>
							<option value="Accountancy">Accountancy</option>
							<option value="Communication and Media Study">Communication and Media Study</option>
							<option value="Information and Communication Technology">Information and Communication Technology</option>
							<option value="Arts">Arts</option>
							<option value="Business Studies">Business Studies</option>
							<option value="Agriculture">Agriculture</option>
						</select>
					</div>
					
					<div class="select-group856">
						<button id="confirmSelection">Confirm Selection</button>
					</div>
				</div>

				<div class="selected-subjects856" id="selectedSubjects">
					<p>Your selected subjects will appear here</p>
				</div>
						
				<table id="workPlanTable">
					<tbody id="plannerBody">
						<!-- Planner rows will be added here by JavaScript -->
					</tbody>
				</table>
			</div>
		</div>
   


		<script>
			// Theme toggle functionality
			const themeToggleBtn = document.getElementById('themeToggle');
			const body = document.body;
			
			let isDarkTheme = false;
			
			if (themeToggleBtn) {
				themeToggleBtn.addEventListener('click', function() {
					isDarkTheme = !isDarkTheme;
					
					if (isDarkTheme) {
						body.classList.add('dark-theme');
						themeToggleBtn.textContent = 'Light Theme';
					} else {
						body.classList.remove('dark-theme');
						themeToggleBtn.textContent = 'Dark Theme';
					}
					
					// Save theme preference
					localStorage.setItem('darkTheme', isDarkTheme);
				});
				
				// Check for saved theme preference
				const savedTheme = localStorage.getItem('darkTheme') === 'true';
				if (savedTheme) {
					body.classList.add('dark-theme');
					themeToggleBtn.textContent = 'Light Theme';
					isDarkTheme = true;
				}
			}
			
			// Subject stream selection logic
			const streamSelect = document.getElementById('streamSelect');
			const categorySelect = document.getElementById('categorySelect');
			const confirmBtn = document.getElementById('confirmSelection');
			const selectedSubjectsDiv = document.getElementById('selectedSubjects');
			const plannerBody = document.getElementById('plannerBody');
			
			// Subject combinations by stream and category
			const subjectCombinations = {
				science: {
					'physical': ['Combined Mathematics', 'Physics', 'Chemistry', 'General English', 'General IT'],
					'biological': ['Biology', 'Physics/Agriculture', 'Chemistry', 'General English', 'General IT'],
					'common': ['Combined Mathematics', 'Physics', 'ICT', 'General English', 'General IT']
				},
				commerce: {
					'first': ['Accounting', 'Business Studies', 'Economics', 'General English', 'General IT'],
					'second': ['Accounting', 'Business Studies', 'ICT', 'General English', 'General IT'],
					'third': ['Accounting', 'Economics', 'ICT', 'General English', 'General IT'],
					'fourth': ['Accounting', 'Economics', 'Business Statistics', 'General English', 'General IT']
				},
				arts: {
					'first': ['European History', 'Buddhist Civilization', 'Geography', 'General English', 'General IT'],
					'second': ['Political Science', 'English Literature', 'Media Studies', 'General English', 'General IT'],
					'third': ['Economics', 'Sinhala', 'Logic', 'General English', 'General IT']
				},
				technology: {
					'engineering': ['Science for Technology', 'Engineering Technology', 'General English', 'General IT'],
					'biosystem': ['Science for Technology', 'Bio-system Technology', 'General English', 'General IT']
				}
			};
			
			// Function to update category options based on stream selection
			function updateCategoryOptions() {
				const selectedStream = streamSelect.value;
				
				// Reset and disable category dropdown if no stream selected
				if (!selectedStream) {
					categorySelect.innerHTML = '<option value="">Select Category</option>';
					categorySelect.disabled = true;
					return;
				}
				
				// Enable category dropdown and populate based on selected stream
				categorySelect.disabled = false;
				categorySelect.innerHTML = '<option value="">Select Category</option>';
				
				const categories = {
					'science': [
						{value: 'physical', text: 'Physical Science Stream'},
						{value: 'biological', text: 'Biological Science Stream'},
						{value: 'common', text: 'Common Stream'}
					],
					'commerce': [
						{value: 'first', text: 'First Category'},
						{value: 'second', text: 'Second Category'},
						{value: 'third', text: 'Third Category'},
						{value: 'fourth', text: 'Fourth Category'}
					],
					'arts': [
						{value: 'first', text: 'First Category'},
						{value: 'second', text: 'Second Category'},
						{value: 'third', text: 'Third Category'}
					],
					'technology': [
						{value: 'engineering', text: 'Engineering Technology'},
						{value: 'biosystem', text: 'Bio-system Technology'}
					]
				};
				
				if (categories[selectedStream]) {
					categories[selectedStream].forEach(category => {
						const option = document.createElement('option');
						option.value = category.value;
						option.textContent = category.text;
						categorySelect.appendChild(option);
					});
				}

				// Show third subject selector only for Technology stream
				const thirdSubjectContainer = document.getElementById('thirdSubjectContainer');
				if (thirdSubjectContainer) {
					thirdSubjectContainer.style.display = selectedStream === 'technology' ? 'block' : 'none';
				}
			}

			// Add the event listener to call our function
			if (streamSelect) {
				streamSelect.addEventListener('change', updateCategoryOptions);
			}
			
			// Create planner table rows
			function createPlannerRows(subjects) {
				plannerBody.innerHTML = '';
				
				// Create an array of colors for different subjects
				const colors = ['#FFD700', '#FF6347', '#4169E1', '#32CD32', '#9370DB'];
				
				subjects.forEach((subject, index) => {
					const row = document.createElement('tr');
					const subjectCell = document.createElement('td');
					subjectCell.textContent = subject;
					row.appendChild(subjectCell);
					
					// Assign a color to this subject
					const starColor = colors[index % colors.length];
					
					// Add cells for each day
					for (let i = 0; i < 7; i++) {
						const dayCell = document.createElement('td');
						
						// Create stars for tracking
						const fullStar = document.createElement('span');
						fullStar.className = 'star';
						fullStar.textContent = '★';
						fullStar.style.color = starColor;
						fullStar.dataset.value = 1;
						fullStar.addEventListener('click', toggleStar);
						
						const halfStar = document.createElement('span');
						halfStar.className = 'star';
						halfStar.textContent = '☆';
						halfStar.style.color = starColor;
						halfStar.dataset.value = 0.5;
						halfStar.addEventListener('click', toggleStar);
						
						const quarterStar = document.createElement('span');
						quarterStar.className = 'star';
						quarterStar.textContent = '·';
						quarterStar.style.color = starColor;
						quarterStar.dataset.value = 0.25;
						quarterStar.addEventListener('click', toggleStar);
						
						dayCell.appendChild(fullStar);
						dayCell.appendChild(document.createTextNode(' '));
						dayCell.appendChild(halfStar);
						dayCell.appendChild(document.createTextNode(' '));
						dayCell.appendChild(quarterStar);
						
						row.appendChild(dayCell);
					}
					
					// Add total cell
					const totalCell = document.createElement('td');
					totalCell.textContent = '0';
					totalCell.className = 'total';
					row.appendChild(totalCell);
					
					plannerBody.appendChild(row);
				});
			}
			
			// Star toggle functionality
			function toggleStar() {
				const isActive = this.style.opacity === '1' || this.style.opacity === '';
				
				if (isActive) {
					this.style.opacity = '0.3';
					this.dataset.active = 'false';
				} else {
					this.style.opacity = '1';
					this.dataset.active = 'true';
				}
				
				// Update total for this row
				updateRowTotal(this.closest('tr'));
			}
			
			// Update row total based on active stars
			function updateRowTotal(row) {
				const stars = row.querySelectorAll('.star');
				let total = 0;
				
				stars.forEach(star => {
					if (star.dataset.active === 'true' || (!star.dataset.active && star.style.opacity !== '0.3')) {
						total += parseFloat(star.dataset.value);
					}
				});
				
				const totalCell = row.querySelector('.total');
				totalCell.textContent = total.toFixed(2);
			}
			
			// Handle confirmation of subject selection
			if (confirmBtn) {
				confirmBtn.addEventListener('click', function() {
					const selectedStream = streamSelect.value;
					const selectedCategory = categorySelect.value;
					
					if (!selectedStream || !selectedCategory) {
						alert('Please select both stream and category');
						return;
					}
					
					// Get the subjects based on stream and category
					let subjects = [...subjectCombinations[selectedStream][selectedCategory]];
					
					// For technology stream, add the selected third subject
					if (selectedStream === 'technology') {
						const thirdSubjectSelect = document.getElementById('thirdSubjectSelect');
						if (thirdSubjectSelect && thirdSubjectSelect.value) {
							// Insert the third subject at position 2 (before General English)
							subjects.splice(2, 0, thirdSubjectSelect.value);
						} else {
							alert('Please select a third subject for Technology stream');
							return;
						}
					}
					
					// Display selected subjects
					let subjectsHTML = '<h4>Your Selected Subjects:</h4><ul>';
					
					subjects.forEach(subject => {
						subjectsHTML += `<li>${subject}</li>`;
					});
					
					subjectsHTML += '</ul>';
					selectedSubjectsDiv.innerHTML = subjectsHTML;
					
					// Create planner rows for selected subjects
					createPlannerRows(subjects);
					
					// Save selected subjects to localStorage for the star sheet page
					localStorage.setItem('selectedStream', selectedStream);
					localStorage.setItem('selectedCategory', selectedCategory);
					localStorage.setItem('selectedSubjects', JSON.stringify(subjects));
					
					// Add link to star sheet if not already present
					if (!document.getElementById('starSheetLink')) {
						const starSheetLink = document.createElement('div');
						starSheetLink.id = 'starSheetLink';
						starSheetLink.style.marginTop = '20px';
						starSheetLink.innerHTML = `
							<a href="work_plan_star_sheet.html" style="display: inline-block;
							  padding: 12px 30px;
							  font-size: 20px;
							  color: #111;
							  background-color: yellow;
							  border: 2px solid yellow;
							  border-radius: 8px;
							  text-decoration: none;
							  font-weight: bold;
							  text-shadow: 0 0 8px yellow, 0 0 12px yellow;
							  box-shadow: 0 0 10px yellow, 0 0 20px yellow inset;
							  transition: 0.3s ease;
							}">
								Open තරු ක්‍රමය (Star Sheet)
							</a>
						`;
						selectedSubjectsDiv.appendChild(starSheetLink);
					}
				});
			}
		</script>
</body>
</html>
